webpackJsonp([36],{263:function(t,a,s){s(500);var e=s(177)(s(406),s(532),"data-v-f40ee9d6",null);t.exports=e.exports},406:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s(26),o=s(6),i=s(0),n=s.n(i),c=s(1);s.n(c);a.default={data:function(){return{complaint:{},new_comment:""}},methods:{accessStorage:function(t){return c.LocalStorage.get.item(t)},fetchData:function(){var t=this,a=this.$route.params.id;o.a.axios.get(e.a.urls.SITE_URL+"api/v1/tenant/complaint-with-comment/"+a+"/").then(function(a){t.complaint=a.data,"Sent"==t.complaint.status&&t.toggleIssue("Read")})},addNewComment:function(){var t=this,a=this.$route.params.id,s={issue:a,message:this.new_comment,admin:!1};o.a.axios.post(e.a.urls.SITE_URL+"api/v1/tenant/complaint/chat/",s).then(function(a){t.complaint.comments.push(a.data),t.new_comment=""})},fromNow:function(t){return n()(t).fromNow()},toggleIssue:function(t){var a=this,s=this.complaint.pk;t&&o.a.axios.patch(e.a.urls.SITE_URL+"api/v1/complaint/"+s+"/",{status:t}).then(function(s){a.complaint.status=t})}},mounted:function(){this.fetchData()}}},471:function(t,a,s){a=t.exports=s(244)(),a.push([t.i,".chat-other .chat-message[data-v-f40ee9d6]{margin:10px 0 0 30px}.chat-you .chat-message[data-v-f40ee9d6]{margin:10px 30px 0 0}.chat-other[data-v-f40ee9d6],.chat-you[data-v-f40ee9d6]{margin:15px 0 0}.bg-cus-red[data-v-f40ee9d6]{background:#ff8f8c!important}.chat-other .chat-message p[data-v-f40ee9d6],.chat-you .chat-message p[data-v-f40ee9d6]{width:70%}",""])},500:function(t,a,s){var e=s(471);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(245)("06ccf4c8",e,!0)},532:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("q-layout",{ref:"layout",attrs:{view:"lHh Lpr lFf"}},[s("div",{staticClass:"toolbar",slot:"header"},[s("button",{attrs:{flat:""},on:{click:function(a){t.$router.go(-1)}}},[s("i",[t._v("arrow_back")])]),t._v(" "),s("q-toolbar-title",[t._v("\n       Complaint\n      ")])],1),t._v(" "),s("div",{staticClass:"layout-view"},[s("div",{staticClass:"layout-padding"},[s("div",{staticClass:"row"},[s("h6",{staticClass:"columm width-2of3"},[t._v(t._s(t.complaint.title))]),t._v(" "),s("div",{staticClass:"columm width-1of3"},["Resolved"!=t.complaint.status?s("span",{staticClass:"token"},[t._v("Not Resolved")]):s("span",{staticClass:"token"},[t._v("Resolved")])])]),t._v(" "),s("div",{staticClass:"row"},[s("p",{staticClass:"columm width-2of3 light-paragraph text-tertiary"},[t._v(t._s(t.complaint.complained_by_name)+" - "+t._s(t.complaint.complaint_room))])]),t._v(" "),s("div",{},["Resolved"!=t.complaint.status?s("button",{staticClass:"primary outline small pull-right",on:{click:function(a){t.toggleIssue("Resolved")}}},[t._v("Mark as Resolved")]):s("button",{staticClass:"primary outline small pull-right",on:{click:function(a){t.toggleIssue("Read")}}},[t._v("Mark as Not Resolved")])]),t._v(" "),s("br"),s("br"),t._v(" "),s("div",{staticClass:"chat-other"},[s("div",{staticClass:"chat-message"},[s("p",{staticClass:"bg-grey-3 text-black"},[t._v("\n            "+t._s(t.complaint.description)),s("br"),t._v(" "),s("small",{staticClass:"light-paragraph pull-right"},[t._v(t._s(t.fromNow(t.complaint.created_at)))])])])]),t._v(" "),t._l(t.complaint.comments,function(a){return s("div",{key:a.pk},[t.accessStorage("user").fullname!=a.commenter_name?s("div",{staticClass:"chat-other"},[s("div",{staticClass:"chat-message"},[s("p",{staticClass:"bg-grey-3 text-black"},[t._v("\n            "+t._s(a.message)),s("br"),t._v(" "),s("small",{staticClass:"light-paragraph pull-right"},[t._v(t._s(t.fromNow(a.created_at)))])])])]):s("div",{staticClass:"chat-you"},[s("div",{staticClass:"chat-message"},[s("p",{staticClass:"bg-cus-red text-black"},[t._v("\n            "+t._s(a.message)),s("br"),t._v(" "),s("small",{staticClass:"light-paragraph pull-right"},[t._v(t._s(t.fromNow(a.created_at)))])])])])])})],2)]),t._v(" "),s("div",{staticClass:"toolbar bg-white",slot:"footer"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.new_comment,expression:"new_comment"}],staticClass:"full-width",attrs:{type:"text",placeholder:"Comment"},domProps:{value:t.new_comment},on:{input:function(a){a.target.composing||(t.new_comment=a.target.value)}}}),t._v(" "),s("button",{on:{click:t.addNewComment}},[s("i",{staticClass:"text-primary"},[t._v("send")])])])])},staticRenderFns:[]}}});