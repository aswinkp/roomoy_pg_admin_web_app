webpackJsonp([2,7,11,17,22,26],{228:function(e,t,a){a(275);var r=a(159)(a(273),a(276),null,null);e.exports=r.exports},229:function(e,t,a){var r=a(159)(a(277),a(284),null,null);e.exports=r.exports},230:function(e,t,a){a(281);var r=a(159)(a(278),a(283),"data-v-0164bd48",null);e.exports=r.exports},231:function(e,t,a){a(317);var r=a(159)(a(292),a(320),null,null);e.exports=r.exports},235:function(e,t,a){a(392);var r=a(159)(a(325),a(413),"data-v-e87356a0",null);e.exports=r.exports},251:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(252).withParams;t.default=r},252:function(e,t,a){"use strict";function r(e){return("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}function n(e,t){var a=new e({data:{pending:!0,value:!1}});return t.then(function(e){a.pending=!1,a.value=e},function(e){throw a.pending=!1,a.value=!1,e}),a.__isVuelidateAsyncVm=!0,a}function i(e){this.dirty=e;var t=this.proxy,a=e?"$touch":"$reset";this.nestedKeys.forEach(function(e){t[e][a]()})}function o(e){if(b)return b;for(var t=e.constructor;t.super;)t=t.super;return b=t,t}function s(e){e.mixin(g)}Object.defineProperty(t,"__esModule",{value:!0}),t.withParams=t.validationMixin=t.Vuelidate=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=a(255),d=function(e,t,a){return e.reduce(function(e,r){return e[a?a(r):r]=t(r),e},{})},c=function(e,t,a,r){if("function"==typeof a)return a.call(e,t,r);a=Array.isArray(a)?a:a.split(".");for(var n=0;n<a.length;n++){if(!t||"object"!=typeof t)return r;t=t[a[n]]}return void 0===t?r:t},v={$invalid:function(){var e=this.proxy;return this.nestedKeys.some(function(t){return e[t].$invalid})||this.ruleKeys.some(function(t){return!e[t]})},$dirty:function(){if(this.dirty)return!0;if(0===this.nestedKeys.length)return!1;var e=this.proxy;return this.nestedKeys.every(function(t){return e[t].$dirty})},$error:function(){return!this.$pending&&this.$dirty&&this.$invalid},$pending:function(){var e=this,t=this.proxy;return this.nestedKeys.some(function(e){return t[e].$pending})||this.ruleKeys.some(function(t){return e.getRef(t).$pending})},$params:function(){var e=this,t=this.validations;return l({},d(this.nestedKeys,function(e){return t[e]&&t[e].$params||null}),d(this.ruleKeys,function(t){return e.getRef(t).$params}))}},_={$touch:function(){i.call(this,!0)},$reset:function(){i.call(this,!1)},$flattenParams:function(){var e=this.proxy,t=[];for(var a in this.$params)if(this.isNested(a)){for(var r=e[a].$flattenParams(),n=0;n<r.length;n++)r[n].path.unshift(a);t=t.concat(r)}else t.push({path:[],name:a,params:this.$params[a]});return t}},m=Object.keys(v),f=Object.keys(_),p=null,h=function(e){if(p)return p;var t=e.extend({props:["rule","model","parentModel","rootModel"],methods:{runRule:function(t){(0,u.pushParams)();var a=this.rule.call(this.rootModel,this.model,t),i=r(a)?n(e,a):a,o=(0,u.popParams)();return{output:i,params:o&&o.$sub?o.$sub.length>1?o:o.$sub[0]:null}}},computed:{run:function(){var e=this,t=this.parentModel;if(Array.isArray(t)&&t.__ob__){var a=t.__ob__.dep;a.depend();var r=a.constructor.target;if(!this._indirectWatcher){var n=r.constructor;this._indirectWatcher=new n(this.rootModel,function(){return e.runRule(t)},null,{lazy:!0})}if(!this._indirectWatcher.dirty&&this._lastModel===this.model)return this._indirectWatcher.depend(),r.value;this._lastModel=this.model,this._indirectWatcher.evaluate(),this._indirectWatcher.depend()}return this._indirectWatcher?this._indirectWatcher.value:this.runRule(t)},$params:function(){return this.run.params},proxy:function(){var e=this.run.output;return e.__isVuelidateAsyncVm?!!e.value:!!e},$pending:function(){var e=this.run.output;return!!e.__isVuelidateAsyncVm&&e.pending}},render:function(e){return null}}),a=e.extend({data:function(){return{dirty:!1}},mounted:function(){this._watcher.lazy=!0},props:["validations","model","prop","parentModel","rootModel"],methods:l({},_,{getRef:function(e){return this._watcher.dirty&&this._watcher.evaluate(),this.$refs[e]},isNested:function(e){return"function"!=typeof this.validations[e]}}),computed:l({},v,{nestedKeys:function(){return this.keys.filter(this.isNested)},ruleKeys:function(){var e=this;return this.keys.filter(function(t){return!e.isNested(t)})},keys:function(){return Object.keys(this.validations)},proxy:function(){var e=this,t=d(this.keys,function(t){return{enumerable:!0,configurable:!1,get:function(){return e.getRef(t).proxy}}}),a=d(m,function(t){return{enumerable:!0,configurable:!1,get:function(){return e[t]}}}),r=d(f,function(t){return{enumerable:!1,configurable:!1,get:function(){return e[t]}}});return Object.defineProperties({},l({},t,a,r))}}),render:function(e){var t=this;return e("div",[this.nestedKeys.map(function(a){return s(e,t,a)}),this.ruleKeys.map(function(a){return b(e,t,a)})])}}),i=a.extend({methods:{isNested:function(e){return void 0!==this.validations[e]()},getRef:function(e){var t=this;return{get proxy(){return t.validations[e]()||!1}}}},render:function(){return null}}),o=a.extend({computed:{keys:function(){return Object.keys(this.model)},tracker:function(){var e=this,t=this.validations.$trackBy;return t?function(a){return""+c(e.rootModel,e.model[a],t)}:function(e){return""+e}}},methods:{isNested:function(){return!0},getRef:function(e){return this._watcher.dirty&&this._watcher.evaluate(),this.$refs[this.tracker(e)]}},render:function(e){return e("div",h(e,this))}}),s=function(e,t,r){if("$params"===r)return null;if("$each"===r)return e(o,{key:r,ref:r,attrs:{validations:t.validations[r],parentModel:t.parentModel,prop:r,model:t.model,rootModel:t.rootModel}});var n=t.validations[r];if(Array.isArray(n)){var s=t.rootModel;return e(i,{key:r,ref:r,attrs:{validations:d(n,function(e){return function(){return c(s,s.$v,e)}},function(e){return Array.isArray(e)?e.join("."):e}),parentModel:null,prop:r,model:null,rootModel:s}})}return e(a,{key:r,ref:r,attrs:{validations:n,parentModel:t.model,prop:r,model:t.model[r],rootModel:t.rootModel}})},h=function(e,t){var r=t.validations,n=l({},r);delete n.$trackBy;var i={};return t.keys.map(function(r){var o=t.tracker(r);return i.hasOwnProperty(o)?null:(i[o]=!0,e(a,{key:o,ref:o,attrs:{validations:n,prop:r,parentModel:t.model,model:t.model[r],rootModel:t.rootModel}}))})},b=function(e,a,r){return e(t,{key:r,ref:r,attrs:{rule:a.validations[r],parentModel:a.parentModel,model:a.model,rootModel:a.rootModel}})};return p=a},b=null,y=function(e,t){var a=o(e),r=h(a),n=new a({render:function(a){return a(r,{ref:"$v",attrs:{validations:"function"==typeof t?t.call(e):t,parentModel:null,prop:"$v",model:e,rootModel:e}})}});return n.$mount(),n},g={beforeCreate:function(){var e=this,t=this.$options;t.validations&&(t.computed||(t.computed={}),t.computed.$v=function(){return e._vuelidate.$refs.$v.proxy})},created:function(){var e=this.$options.validations;e&&(this._vuelidate=y(this,e))},beforeDestroy:function(){this._vuelidate&&(this._vuelidate.$destroy(),this._vuelidate=null)}};t.Vuelidate=s,t.validationMixin=g,t.withParams=u.withParams,t.default=s},253:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=(0,i.default)({type:"required"},function(e){return Array.isArray(e)?!!e.length:void 0!==e&&null!==e&&!!String(e).length})},254:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.and=t.or=t.sameAs=t.required=t.minLength=t.maxLength=t.email=t.between=t.numeric=t.alphaNum=t.alpha=void 0;var n=a(256),i=r(n),o=a(257),s=r(o),l=a(263),u=r(l),d=a(259),c=r(d),v=a(260),_=r(v),m=a(261),f=r(m),p=a(262),h=r(p),b=a(253),y=r(b),g=a(265),w=r(g),C=a(264),$=r(C),M=a(258),x=r(M);t.alpha=i.default,t.alphaNum=s.default,t.numeric=u.default,t.between=c.default,t.email=_.default,t.maxLength=f.default,t.minLength=h.default,t.required=y.default,t.sameAs=w.default,t.or=$.default,t.and=x.default},255:function(e,t,a){"use strict";function r(){null!==c&&d.push(c),t.target=c={}}function n(){var e=c,a=t.target=c=d.pop()||null;return a&&(Array.isArray(a.$sub)||(a.$sub=[]),a.$sub.push(e)),e}function i(e){if("object"!=typeof e||Array.isArray(e))throw new Error("params must be an object");t.target=c=u({},c,e)}function o(e,t){return s(function(a){return function(){a(e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.apply(this,n)}})}function s(e){var t=e(i);return function(){r();try{for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return t.apply(this,a)}finally{n()}}}function l(e,t){return"object"==typeof e&&void 0!==t?o(e,t):s(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.pushParams=r,t.popParams=n,t.withParams=l;var d=[],c=t.target=null;t._setTarget=function(e){t.target=c=e}},256:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=(0,i.default)({type:"alpha"},function(e){return void 0===e||null===e||""===e||/^[a-zA-Z]*$/.test(e)})},257:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=(0,i.default)({type:"alphaNum"},function(e){return void 0===e||null===e||""===e||/^[a-zA-Z0-9]*$/.test(e)})},258:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.default)({type:"and"},function(){for(var e=this,a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.length>0&&t.reduce(function(t,a){return t&&a.apply(e,r)},!0)})}},259:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(253),i=r(n),o=a(251),s=r(o);t.default=function(e,t){return(0,s.default)({type:"between",min:e,max:t},function(a){return!(0,i.default)(a)||!/\s/.test(a)&&Number(e)<=a&&Number(t)>=a})}},260:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=(0,i.default)({type:"email"},function(e){return void 0===e||null===e||""===e||/(^$|^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/.test(e)})},261:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=function(e){return(0,i.default)({type:"maxLength",max:e},function(t){return Array.isArray(t)?0===t.length||t.length<=e:void 0===t||null===t||(""===t||String(t).length<=e)})}},262:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=function(e){return(0,i.default)({type:"minLength",min:e},function(t){return Array.isArray(t)?0===t.length||t.length>=e:void 0===t||null===t||(""===t||String(t).length>=e)})}},263:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=(0,i.default)({type:"numeric"},function(e){return void 0===e||null===e||""===e||/^[0-9]*$/.test(e)})},264:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.default)({type:"or"},function(){for(var e=this,a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return t.length>0&&t.reduce(function(t,a){return t||a.apply(e,r)},!1)})}},265:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(251),i=r(n);t.default=function(e){var t={type:"sameAs",eq:e};return(0,i.default)(t,function(t,a){return t===("function"==typeof e?e.call(this,a):a[e])})}},266:function(e,t,a){e.exports={default:a(269),__esModule:!0}},269:function(e,t,a){var r=a(8),n=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},273:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),n=a.n(r);t.default={props:["paymentlist"],data:function(){return{}},methods:{openPaymentListModal:function(){this.$refs.allPaymentsModal.open()},dateformatter:function(e){return e?n()(e).format("DD/MM/YYYY"):"Not Specified"}}}},274:function(e,t,a){t=e.exports=a(225)(),t.push([e.i,"",""])},275:function(e,t,a){var r=a(274);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(226)("34661be9",r,!0)},276:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-modal",{ref:"allPaymentsModal",attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}}},[a("q-layout",[a("div",{staticClass:"toolbar",slot:"header"},[a("button",{on:{click:function(t){e.$refs.allPaymentsModal.close()}}},[a("i",[e._v("arrow_back")])]),e._v(" "),a("q-toolbar-title",{attrs:{padding:1}},[e._v("\n          All Payments\n        ")])],1),e._v(" "),a("div",{staticClass:"layout-view"},[a("div",{staticClass:"list"},e._l(e.paymentlist,function(t){return a("div",{staticClass:"item multiple-lines"},[a("div",{staticClass:"item-content"},[a("div",[e._v("Rs. "+e._s(t.amount))]),e._v(" "),t.is_discount?a("div",[e._v("Discount")]):e._e(),e._v(" "),t.is_extra?a("div",[e._v("Extra Payment")]):e._e(),e._v(" "),t.to_pay?a("div",[e._v("To Pay")]):e._e(),e._v(" "),t.description?a("div",[e._v("Description: "+e._s(t.description))]):e._e(),e._v(" "),a("div",[e._v(" Date: "+e._s(e.dateformatter(t.date)))])])])}))])])],1)],1)},staticRenderFns:[]}},277:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:{type:Object,validator:function(e){return"string"==typeof e.from&&"string"==typeof e.to||(console.error("DatetimeRange requires a valid {from, to} model."),!1)},required:!0},className:[String,Object],css:[String,Object],type:{type:String,default:"date"},min:{type:String,default:""},max:{type:String,default:""},format:String,noClear:Boolean,clearLabel:{type:String,default:"Clear"},okLabel:{type:String,default:"Set"},cancelLabel:{type:String,default:"Cancel"},defaultSelection:String,fromLabel:String,toLabel:String,fromPlaceholder:String,toPlaceholder:String,staticLabel:String,readonly:Boolean,disable:Boolean},computed:{model:{get:function(){return this.value},set:function(e){console.log("Inside CustomDatetime Set"),this.$emit("input",e)}}}}},278:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(266),n=a.n(r),i=a(24),o=a(5),s=a(252),l=a.n(s),u=a(0),d=a.n(u),c=a(254),v=(a.n(c),a(1)),_=(a.n(v),a(228)),m=a.n(_);o.a.use(l.a),t.default={props:["reservation","show_status_buttons","show_payments_button"],components:{PaymentListModal:m.a},data:function(){return{show_extras:!1,status:null,reservation_obj:null,editable_reservation:{name:"",email:"",phone_number:"",plan:"",deposit_amount:"",amount_per_plan:"",range:{from:"",to:""}}}},validations:{editable_reservation:{name:{required:c.required},email:{email:c.email},phone_number:{required:c.required,numeric:c.numeric,minLength:a.i(c.minLength)(10),maxLength:a.i(c.maxLength)(10)},plan:{required:c.required},deposit_amount:{required:c.required,numeric:c.numeric},amount_per_plan:{required:c.required,numeric:c.numeric},range:{from:{required:c.required}}}},beforeMount:function(){this.reservation_obj=this.reservation,this.status=this.reservation_obj.status},methods:{toggle:function(){this.show_extras=!this.show_extras},get_from_time:function(e){var e=JSON.parse(e);if(e.lower){return d()(e.lower).format("hh:mm A")}},get_plan:function(e){return"MO"==e?"Monthly":"DA"==e?"Daily":void 0},openModal:function(){var e=this;this.editable_reservation={bed:this.reservation_obj.bed,id:this.reservation_obj.pk,name:this.reservation_obj.name,phone_number:this.reservation_obj.phone_number,plan:this.reservation_obj.plan,status:"act",deposit_amount:this.reservation_obj.deposit_amount,amount_per_plan:this.reservation_obj.amount_per_plan,email:this.reservation_obj.email_id,range:{from:"",to:""}};var t=JSON.parse(e.reservation_obj.period);this.editable_reservation.range.from=t.lower,this.editable_reservation.range.to=t.upper?t.upper:"",this.$refs.editReservationModal.open()},openDeleteReservation:function(e){this.reservation_to_delete=e,this.$refs.deleteReservationModal.open()},deleteReservation:function(e){console.log(e);var t=this;o.a.axios.delete(i.a.urls.SITE_URL+"api/v1/reservation/"+e+"/").then(function(a){204==a.status&&(t.$emit("deleteReservation",e),t.$refs.deleteReservationModal.close(),t.$refs.editReservationModal.close())}).catch(function(e){t.error=e,console.log("Error",e)})},submitReservationForm:function(){var e=this;if(this.$v.editable_reservation.$touch(),this.$v.editable_reservation.$error)return void v.Toast.create("Please review fields again.");var t=d()(e.editable_reservation.range.from),a=d()(e.editable_reservation.range.to);if("DA"==this.editable_reservation.plan&&isNaN(t.diff(a,"days")))return void v.Toast.create("To Date cant be blank for Daily Plan.");if("DA"==this.editable_reservation.plan&&Math.abs(t.diff(a,"days"))>30)return void v.Toast.create("Daily plan can't be more than 30 days");var r={name:this.editable_reservation.name,phone_number:this.editable_reservation.phone_number,email_id:this.editable_reservation.email,deposit_amount:this.editable_reservation.deposit_amount,amount_per_plan:this.editable_reservation.amount_per_plan,plan:this.editable_reservation.plan,status:"act",period:function(){var t=e.editable_reservation.range.from,a=null;if(""!=e.editable_reservation.range.to)var a=e.editable_reservation.range.to;var r={lower:t,upper:a,bounds:"[)"};return n()(r)}()};o.a.axios.patch(i.a.urls.SITE_URL+"api/v1/reservation/"+e.editable_reservation.id+"/",r).then(function(t){null!=t.data&&(console.log("success"),e.reservation_obj=t.data,e.$refs.editReservationModal.close())}).catch(function(t){if(e.error=t,t.response.data.non_field_errors){var a="";for(var r in t.response.data.non_field_errors)a+=t.response.data.non_field_errors[r]+"\n";v.Toast.create(a)}})},get_from_to:function(e){var e=JSON.parse(e);if(e.upper)var t=d()(e.upper).format("DD/MM/YY");else var t="Unknown";if(e.lower)var a=d()(e.lower).format("DD/MM/YY");else var a="Unknown";return a+" - "+t},change_status:function(e){var t=this;o.a.axios.patch(i.a.urls.SITE_URL+"api/v1/reservation/"+t.reservation_obj.pk+"/",{status:e}).then(function(e){null!=e.data&&(t.reservation_obj=e.data)}).catch(function(e){if(t.error=e,e.response.data.non_field_errors){var a="";for(var r in e.response.data.non_field_errors)a+=e.response.data.non_field_errors[r]+"\n";v.Toast.create(a)}})}}}},280:function(e,t,a){t=e.exports=a(225)(),t.push([e.i,".border[data-v-0164bd48]{border:1px solid #ccc;margin-bottom:3px}",""])},281:function(e,t,a){var r=a(280);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(226)("51a8ea7e",r,!0)},283:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border reserve_item",class:{open:e.show_extras}},[a("div",{staticClass:"item-content"},[a("div",{staticClass:"row reserve_card",on:{click:function(t){e.toggle()}}},[a("div",{staticClass:"reserve_left"},[a("div",{staticClass:"reserv_time"},[e._v(e._s(e.get_from_time(e.reservation_obj.period)))]),e._v(" "),a("div",{staticClass:"reserv_plan"},[e._v("Plan: "+e._s(e.get_plan(e.reservation_obj.plan)))])]),e._v(" "),a("div",{staticClass:"reserve_right"},[a("div",{staticClass:"bar"}),e._v(" "),a("div",{staticClass:"reserv_time ellipsis"},[e._v(e._s(e.reservation_obj.name))]),e._v(" "),a("div",{staticClass:"reserv_plan"},[e._v(e._s(e.get_from_to(e.reservation_obj.period)))])]),e._v(" "),a("a",{staticClass:"call_btn text-white",attrs:{href:"tel:"+e.reservation_obj.phone_number}},[a("i",{staticClass:"on-center"},[e._v("call")])])]),e._v(" "),a("div",{staticClass:"justify-around reserv_details"},[a("div",{staticClass:"amt_box_wrap"},[a("div",{staticClass:"amt_box"},[e._v("Amount Per "+e._s("MO"==e.reservation_obj.plan?"Month":"Day")+": "+e._s(e.reservation_obj.amount_per_plan))]),e._v(" "),a("div",{staticClass:"amt_box"},[e._v("Amount to Pay: "+e._s(e.reservation_obj.amount_to_pay))])]),e._v(" "),a("div",{staticClass:"row justify-between"},[a("button",{staticClass:"primary btn",on:{click:function(t){e.openModal()}}},[e._v("Edit")]),e._v(" "),!e.show_status_buttons||"pend"!=e.status&&"act"!=e.status?e._e():a("button",{staticClass:"primary btn",on:{click:function(t){e.change_status("chkd")}}},[e._v("Check-In")]),e._v(" "),!e.show_status_buttons||"pend"!=e.status&&"act"!=e.status?e._e():a("button",{staticClass:"negative btn cancel",on:{click:function(t){e.change_status("canc")}}},[e._v("Cancel Booking")]),e._v(" "),e.show_payments_button?a("button",{staticClass:"primary btn",on:{click:function(t){e.$refs.paymentListModal.openPaymentListModal()}}},[e._v("See all Payments")]):e._e()])])]),e._v(" "),a("q-modal",{ref:"editReservationModal",attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}}},[a("q-layout",[a("div",{staticClass:"toolbar",slot:"header"},[a("button",{on:{click:function(t){e.$refs.editReservationModal.close()}}},[a("i",[e._v("arrow_back")])]),e._v(" "),a("q-toolbar-title",{attrs:{padding:1}},[e._v("\n            Edit Reservation\n          ")])],1),e._v(" "),a("div",{staticClass:"layout-view layout-padding"},[a("div",{staticClass:"floating-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editable_reservation.name,expression:"editable_reservation.name"}],staticClass:"full-width",attrs:{required:""},domProps:{value:e.editable_reservation.name},on:{input:[function(t){t.target.composing||(e.editable_reservation.name=t.target.value)},function(t){e.$v.editable_reservation.name.$touch()}]}}),e._v(" "),a("label",[e._v("Name")])]),e._v(" "),e.$v.editable_reservation.name.required?e._e():a("span",{staticClass:"form-error-message row"},[e._v("Name is required")]),e._v(" "),a("div",{staticClass:"floating-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editable_reservation.phone_number,expression:"editable_reservation.phone_number"}],staticClass:"full-width",attrs:{type:"number",required:""},domProps:{value:e.editable_reservation.phone_number},on:{input:[function(t){t.target.composing||(e.editable_reservation.phone_number=t.target.value)},function(t){e.$v.editable_reservation.phone_number.$touch()}],blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("label",[e._v("Phone Number")])]),e._v(" "),e.$v.editable_reservation.phone_number.required&&e.$v.editable_reservation.phone_number.minLength&&e.$v.editable_reservation.phone_number.maxLength?e._e():a("span",{staticClass:"form-error-message row"},[e._v("Enter valid 10-digit Mobile Number")]),e._v(" "),a("div",{staticClass:"floating-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editable_reservation.email,expression:"editable_reservation.email"}],staticClass:"full-width",attrs:{required:""},domProps:{value:e.editable_reservation.email},on:{input:function(t){t.target.composing||(e.editable_reservation.email=t.target.value)}}}),e._v(" "),a("label",[e._v("Email")])]),e._v(" "),e.$v.editable_reservation.email.email?e._e():a("span",{staticClass:"form-error-message row"},[e._v("Please enter valid email.")]),e._v(" "),a("div",{staticClass:"row"},[a("span",{staticClass:"width-1of3"},[e._v("Plan")]),e._v(" "),a("label",{staticClass:"width-1of3"},[a("q-radio",{attrs:{val:"DA"},model:{value:e.editable_reservation.plan,callback:function(t){e.editable_reservation.plan=t},expression:"editable_reservation.plan"}}),e._v("\n              Daily\n            ")],1),e._v(" "),a("label",{staticClass:"width-1of3"},[a("q-radio",{attrs:{val:"MO"},model:{value:e.editable_reservation.plan,callback:function(t){e.editable_reservation.plan=t},expression:"editable_reservation.plan"}}),e._v("\n              Monthly\n            ")],1)]),e._v(" "),e.$v.editable_reservation.plan.required?e._e():a("span",{staticClass:"form-error-message row"},[e._v("Plan is required")]),e._v(" "),a("div",{staticClass:"floating-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editable_reservation.amount_per_plan,expression:"editable_reservation.amount_per_plan"}],staticClass:"full-width",attrs:{type:"number",required:""},domProps:{value:e.editable_reservation.amount_per_plan},on:{input:function(t){t.target.composing||(e.editable_reservation.amount_per_plan=t.target.value)},blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("label",[e._v("Amount per plan")])]),e._v(" "),e.$v.editable_reservation.amount_per_plan.required&&e.$v.editable_reservation.amount_per_plan.numeric?e._e():a("span",{staticClass:"form-error-message row"},[e._v("Please enter valid amount.")]),e._v(" "),a("div",{staticClass:"floating-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editable_reservation.deposit_amount,expression:"editable_reservation.deposit_amount"}],staticClass:"full-width",attrs:{type:"number",required:""},domProps:{value:e.editable_reservation.deposit_amount},on:{input:function(t){t.target.composing||(e.editable_reservation.deposit_amount=t.target.value)},blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("label",[e._v("Deposit Amount")])]),e._v(" "),e.$v.editable_reservation.deposit_amount.required&&e.$v.editable_reservation.deposit_amount.numeric?e._e():a("span",{staticClass:"form-error-message row"},[e._v("Please enter valid amount.")]),e._v(" "),a("div",[e._v("From Date and To Date")]),e._v(" "),a("div",{staticClass:"row"},["DA"==e.editable_reservation.plan?a("q-datetime-range",{staticClass:"full-width",attrs:{type:"datetime"},on:{input:function(t){e.$v.editable_reservation.range.$touch()}},model:{value:e.editable_reservation.range,callback:function(t){e.editable_reservation.range=t},expression:"editable_reservation.range"}}):a("q-datetime-range",{staticClass:"full-width",attrs:{type:"date"},on:{input:function(t){e.$v.editable_reservation.range.$touch()}},model:{value:e.editable_reservation.range,callback:function(t){e.editable_reservation.range=t},expression:"editable_reservation.range"}})],1),e._v(" "),e.$v.editable_reservation.range.from.required?e._e():a("span",{staticClass:"form-error-message row"},[e._v("From date is required")]),e._v(" "),a("div",{staticClass:"row"},[a("button",{staticClass:"primary width-1of2 m10",on:{click:function(t){e.submitReservationForm()}}},[e._v("Save")]),e._v(" "),a("button",{staticClass:"tertiary width-1of2 m10",on:{click:function(t){e.$refs.editReservationModal.close()}}},[e._v("Cancel")])]),e._v(" "),a("button",{staticClass:"negative full-width",on:{click:function(t){e.openDeleteReservation(e.editable_reservation.id)}}},[e._v("Delete Reservation")])])])],1),e._v(" "),a("q-modal",{ref:"deleteReservationModal",attrs:{position:"bottom","content-css":{padding:"20px"}}},[a("p",[e._v("Are you sure you want to Delete this Reservation ?")]),e._v(" "),a("div",{staticClass:"row"},[a("button",{staticClass:"negative width-1of2 m10",on:{click:function(t){e.deleteReservation(e.reservation_to_delete)}}},[e._v("Delete")]),e._v(" "),a("button",{staticClass:"tertiary width-1of2 m10",on:{click:function(t){e.$refs.deleteReservationModal.close()}}},[e._v("Cancel")])])]),e._v(" "),e.reservation_obj?a("PaymentListModal",{ref:"paymentListModal",attrs:{paymentlist:e.reservation_obj.reservation_payment}}):e._e()],1)},staticRenderFns:[]}},284:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-datetime-range"},[a("q-datetime",{class:e.className,style:e.css,attrs:{"default-selection":e.defaultSelection,type:e.type,min:e.min,max:e.model.to||e.max,format:e.format,"no-clear":e.noClear,"clear-label":e.clearLabel,"ok-label":e.okLabel,"cancel-label":e.cancelLabel,label:e.fromLabel,placeholder:e.fromPlaceholder,"static-label":e.staticLabel,readonly:e.readonly,disable:e.disable},on:{input:function(t){e.$emit("inputFrom",e.value)}},model:{value:e.model.from,callback:function(t){e.model.from=t},expression:"model.from"}}),e._v(" "),a("q-datetime",{class:e.className,style:e.css,attrs:{"default-selection":e.defaultSelection,type:e.type,min:e.model.from||e.min,max:e.max,format:e.format,"no-clear":e.noClear,"clear-label":e.clearLabel,"ok-label":e.okLabel,"cancel-label":e.cancelLabel,label:e.toLabel,placeholder:e.toPlaceholder,"static-label":e.staticLabel,readonly:e.readonly,disable:e.disable},on:{input:function(t){e.$emit("inputTo",e.value)}},model:{value:e.model.to,callback:function(t){e.model.to=t},expression:"model.to"}})],1)},staticRenderFns:[]}},287:function(e,t,a){e.exports={default:a(289),__esModule:!0}},288:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=a(287),i=r(n);t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},289:function(e,t,a){a(290);var r=a(8).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},290:function(e,t,a){var r=a(25);r(r.S+r.F*!a(9),"Object",{defineProperty:a(11).f})},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(24),n=a(5),i=a(0),o=(a.n(i),a(1)),s=(a.n(o),a(252)),l=a.n(s),u=a(254);a.n(u);n.a.use(l.a),t.default={props:["reservation"],data:function(){return{mode:"",add_payment_form:{amount:"",description:"",is_extra:!1,to_pay:!1,is_discount:!1}}},validations:{add_payment_form:{amount:{required:u.required}}},methods:{openModal:function(e){this.mode=e,this.$refs.paymentModal.open()},submitPayment:function(e){if(this.$v.add_payment_form.$touch(),this.$v.add_payment_form.$error)return void o.Toast.create("Please review fields again.");var t=this.add_payment_form.amount;"payment"==this.mode&&(this.add_payment_form.is_extra=!1,this.add_payment_form.to_pay=!1,this.add_payment_form.is_discount=!1),"discount"==this.mode&&(this.add_payment_form.is_extra=!1,this.add_payment_form.to_pay=!1,this.add_payment_form.is_discount=!0),console.log(this.mode),"to_pay"==this.mode&&(console.log("Inside to pay"),t*=-1,this.add_payment_form.is_extra=!1,this.add_payment_form.to_pay=!0,this.add_payment_form.is_discount=!1);var a={amount:t,is_extra:this.add_payment_form.is_extra,to_pay:this.add_payment_form.to_pay,description:this.add_payment_form.description,reservation:e.pk},i=this;n.a.axios.post(r.a.urls.SITE_URL+"api/v1/payment/",a).then(function(e){null!=e.data&&(i.$emit("refresh"),i.$emit("success"),i.$refs.paymentModal.close(),i.add_payment_form={amount:"",is_extra:!1,description:"",is_discount:!1,to_pay:!1})}).catch(function(e){i.error=e,console.log("Error",e)})}}}},315:function(e,t,a){t=e.exports=a(225)(),t.push([e.i,"",""])},317:function(e,t,a){var r=a(315);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(226)("6e1cd969",r,!0)},320:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-modal",{ref:"paymentModal",staticClass:"minimized",attrs:{"content-css":{padding:"20px"}}},[a("div",{staticClass:"floating-label"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.add_payment_form.amount,expression:"add_payment_form.amount",modifiers:{number:!0}}],staticClass:"full-width",class:{"has-error":e.$v.add_payment_form.amount.$error},attrs:{type:"number",required:""},domProps:{value:e.add_payment_form.amount},on:{input:[function(t){t.target.composing||(e.add_payment_form.amount=e._n(t.target.value))},function(t){e.$v.add_payment_form.amount.$touch()}],blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("label",[e._v("Amount")])]),e._v(" "),e.$v.add_payment_form.amount.required?e._e():a("span",{staticClass:"form-error-message row"},[e._v("Field is required")]),a("br"),e._v(" "),a("div",{staticClass:"floating-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.add_payment_form.description,expression:"add_payment_form.description"}],staticClass:"full-width",attrs:{required:""},domProps:{value:e.add_payment_form.description},on:{input:function(t){t.target.composing||(e.add_payment_form.description=t.target.value)}}}),e._v(" "),a("label",[e._v("Description")])]),e._v(" "),a("br"),a("br"),e._v(" "),a("div",{staticClass:"row"},[a("button",{staticClass:"primary width-1of2 m3",on:{click:function(t){e.submitPayment(e.reservation)}}},[e._v("Add")]),e._v(" "),a("button",{staticClass:"tertiary width-1of2 m3",on:{click:function(t){e.$refs.paymentModal.close()}}},[e._v("Cancel")])])])],1)},staticRenderFns:[]}},325:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(288),n=a.n(r),i=a(266),o=a.n(i),s=a(24),l=a(5),u=a(0),d=a.n(u),c=a(1),v=(a.n(c),a(252)),_=a.n(v),m=a(254),f=(a.n(m),a(231)),p=a.n(f),h=a(228),b=a.n(h),y=a(230),g=a.n(y),w=a(229),C=a.n(w);l.a.use(_.a),t.default={components:{AddPaymentModal:p.a,PaymentListModal:b.a,ExpandableReservation:g.a,CustomDateTimeRange:C.a},props:{denormalized_beds:{type:Array,required:!0},selected_room:{type:Object,required:!0},selected_bed:{type:Object,required:!0}},beforeMount:function(){this.fetchData(),this.loaded=!1},data:function(){return{eod:{from:d()().format(),to:d()().endOf("day").format()},loaded:!1,bed:{current_reservation:{reservation_payments:[]}},new_reservation:{name:"",email:"",phone:"",plan:"MO",amount_per_plan:"",deposit_amount:"",range:{from:"",to:""}},upcoming_reservations:[],vacate_later_form:{date:""},reservation_to_vacate:""}},validations:{vacate_later_form:{date:{required:m.required}},new_reservation:{name:{required:m.required},email:{email:m.email},phone:{required:m.required,numeric:m.numeric,minLength:a.i(m.minLength)(10),maxLength:a.i(m.maxLength)(10)},plan:{required:m.required},amount_per_plan:{required:m.required,numeric:m.numeric},deposit_amount:{required:m.required,numeric:m.numeric},range:{from:{required:m.required}}}},created:function(){},computed:{},methods:{openVacateNow:function(e){this.reservation_to_vacate=e,this.$refs.openVacateModal.open()},dateformatter:function(e){return e?d()(e).format("DD/MM/YYYY"):"Unknown"},deleteReservation:function(e){var t=this.upcoming_reservations.filter(function(t){return t.pk!=e});console.log(t),this.upcoming_reservations=t},fetchData:function(){var e=this;c.Loading.show(),l.a.axios.get(s.a.urls.SITE_URL+"api/v1/bed-detail/"+e.$route.params.id+"/").then(function(t){if(null!=t.data&&(e.bed=t.data,e.$store.commit("update_bed_in_bed_reservation",{bed_id:e.bed.pk,reservation:e.bed.current_reservation}),!e.bed.current_reservation)){c.Loading.show(),l.a.axios.get(s.a.urls.SITE_URL+"api/v1/reservation/?bed="+e.bed.pk+"&upcoming=true&from_date="+null+"&to_date="+null).then(function(t){null!=t.data&&(e.upcoming_reservations=t.data),c.Loading.hide()}).catch(function(t){e.error=t,c.Loading.hide(),console.log("Error",t)})}e.loaded=!0,c.Loading.hide()}).catch(function(t){e.error=t,e.loaded=!0,c.Loading.hide(),console.log("Error",t)})},vacateReservationNow:function(e){var t=this;l.a.axios.patch(s.a.urls.SITE_URL+"api/v1/reservation/"+e.pk+"/",{period:function(){var t=JSON.parse(e.period);return t.upper=d()().format("YYYY-MM-DDTHH:mm:ssZ"),o()(t)}(),status:"vacc"}).then(function(e){null!=e.data&&(t.bed.current_reservation=null,t.$store.commit("update_bed_in_bed_reservation",{bed_id:t.bed.pk,reservation:t.bed.current_reservation})),t.$refs.openVacateModal.close(),t.$refs.vacateModal.close()}).catch(function(e){t.error=e;var a="";for(var r in e.response.data)console.log(r),a+=r+":",a+=e.response.data[r]+"\n";c.Toast.create(a),console.log("Error",e)})},submitVacateLater:function(e){var t=this;this.$v.vacate_later_form.$touch();var a=JSON.parse(e.period);return a.upper=d()(t.vacate_later_form.date).format("YYYY-MM-DDTHH:mm:ssZ"),a.upper<a.lower?void c.Toast.create("Vacation should be greater than Occupied date"):this.$v.vacate_later_form.$error?void c.Toast.create("Please review fields again."):void l.a.axios.patch(s.a.urls.SITE_URL+"api/v1/reservation/"+e.pk+"/",{period:function(){var a=JSON.parse(e.period);return a.upper=d()(t.vacate_later_form.date).format("YYYY-MM-DDTHH:mm:ssZ"),o()(a)}()}).then(function(e){null!=e.data&&(t.bed.current_reservation=e.data),t.$refs.vacateLaterModal.close(),t.$refs.vacateModal.close()}).catch(function(e){if(t.error=e,e.response.data.non_field_errors){var a="";for(var r in e.response.data.non_field_errors)a+=e.response.data.non_field_errors[r]+"\n";c.Toast.create(a)}})},submitReservationForm:function(e){var t,a=this;if(this.$v.new_reservation.$touch(),this.$v.new_reservation.$error)return void c.Toast.create("Please review fields again.");var r=d()(a.new_reservation.range.from),i=d()(a.new_reservation.range.to);if("DA"==this.new_reservation.plan&&isNaN(r.diff(i,"days")))return void c.Toast.create("To Date cant be blank for Daily Plan.");if("DA"==this.new_reservation.plan&&Math.abs(r.diff(i,"days"))>30)return void c.Toast.create("Daily plan can't be more than 30 days");var u=(t={bed:e,name:this.new_reservation.name,phone_number:this.new_reservation.phone,email_id:this.new_reservation.email,plan:this.new_reservation.plan,amount_per_plan:this.new_reservation.amount_per_plan},n()(t,"amount_per_plan",this.new_reservation.amount_per_plan),n()(t,"deposit_amount",this.new_reservation.deposit_amount),n()(t,"status","act"),n()(t,"period",function(){var e=a.new_reservation.range.from,t=null;if(""!=a.new_reservation.range.to)var t=a.new_reservation.range.to;var r={lower:e,upper:t,bounds:"[)"};return o()(r)}()),t);l.a.axios.post(s.a.urls.SITE_URL+"api/v1/reservation/",u).then(function(e){null!=e.data&&(a.fetchData(),a.new_reservation={name:"",email:"",phone:"",plan:"",amount_per_plan:"",deposit_amount:"",range:{from:"",to:""}},a.$refs.addReservationModal.close())}).catch(function(e){if(a.error=e,e.response.data.non_field_errors){var t="";for(var r in e.response.data.non_field_errors)t+=e.response.data.non_field_errors[r]+"\n";c.Toast.create(t)}console.log("Error",e)})}}}},375:function(e,t,a){t=e.exports=a(225)(),t.push([e.i,".bed_detail_wrap .column.width-1of2[data-v-e87356a0]{padding:15px 10px}",""])},392:function(e,t,a){var r=a(375);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(226)("79b1fcd1",r,!0)},393:function(e,t,a){e.exports=a.p+"img/not-paid.b99b581.jpg"},394:function(e,t,a){e.exports=a.p+"img/paid.7f9fc6a.jpg"},396:function(e,t,a){e.exports=a.p+"img/vacant-bed.3a23d97.png"},413:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-layout",[r("div",{staticClass:"toolbar",slot:"header"},[r("button",{on:{click:function(t){e.$router.go(-1)}}},[r("i",[e._v("arrow_back")])]),e._v(" "),r("q-toolbar-title",{attrs:{padding:1}},[e._v("\n      Bed Details\n    ")])],1),e._v(" "),e.loaded?r("div",{staticClass:"layout-view"},[e.bed.current_reservation?r("div",{staticClass:"status_img"},[e.bed.current_reservation&&e.bed.current_reservation.amount_to_pay<1?r("img",{attrs:{src:a(394)}}):r("img",{attrs:{src:a(393)}})]):r("div",{staticClass:"m10",attrs:{class:"m10"}},[r("div",{staticClass:"row vacant_img"},[r("div",{staticClass:"width-1of2 img-wrap"},[r("img",{attrs:{src:a(396)}})]),e._v(" "),r("div",{staticClass:"width-1of2 self-center text-center "},[r("div",{staticClass:"text-faded"},[e._v("No Current Reservation")]),e._v(" "),r("div",{staticClass:"row m10 justify-center"},[e.bed.current_reservation&&e.bed.current_reservation.pk?e._e():r("button",{staticClass:"primary",on:{click:function(t){e.$refs.addReservationModal.open()}}},[e._v("Add New")])])])])]),e._v(" "),e.bed.current_reservation&&e.bed.current_reservation.pk?r("div",{staticClass:"bed_detail_wrap"},[r("div",{staticClass:"row medium-gutter"},[r("div",{staticClass:"column width-1of2"},[r("div",{staticClass:"title"},[e._v("\n            Name\n          ")]),e._v(" "),r("div",{staticClass:"value"},[e._v("\n            "+e._s(e.bed.current_reservation.name)+"\n          ")])]),e._v(" "),r("div",{staticClass:"column width-1of2"},[r("div",{staticClass:"title"},[e._v("\n            Phone Number\n          ")]),e._v(" "),r("div",{staticClass:"value"},[e._v("\n            "+e._s(e.bed.current_reservation.phone_number)+"\n          ")])])]),e._v(" "),r("div",{staticClass:"row medium-gutter"},[r("div",{staticClass:"column width-1of2"},[r("div",{staticClass:"title"},[e._v("\n            Time Period\n          ")]),e._v(" "),r("div",{staticClass:"value"},[r("span",[e._v(e._s(e.dateformatter(JSON.parse(e.bed.current_reservation.period).lower)))]),e._v("\n            to "),r("span",[e._v(e._s(e.dateformatter(JSON.parse(e.bed.current_reservation.period).upper)))])])]),e._v(" "),r("div",{staticClass:"column width-1of2"},[r("div",{staticClass:"title"},[e._v("\n            Plan\n          ")]),e._v(" "),r("div",{staticClass:"value"},["MO"==e.bed.current_reservation.plan?r("span",[e._v("Monthly")]):r("span",[e._v("Daily")])])])]),e._v(" "),r("div",{staticClass:"row medium-gutter"},[r("div",{staticClass:"column width-1of2"},[r("div",{staticClass:"title"},[e._v("\n            Amount Per Plan\n          ")]),e._v(" "),r("div",{staticClass:"value"},[e._v("\n            "+e._s(e.bed.current_reservation.amount_per_plan)+"\n          ")])]),e._v(" "),e.bed.current_reservation.amount_to_pay>-1?r("div",{staticClass:"column width-1of2"},[r("div",{staticClass:"title"},[e._v("\n            Amount To Pay\n          ")]),e._v(" "),r("div",{staticClass:"value"},[e._v("\n            "+e._s(e.bed.current_reservation.amount_to_pay)+"\n          ")])]):r("div",{staticClass:"column width-1of2"},[r("div",{staticClass:"title"},[e._v("\n            Amount in Advance\n          ")]),e._v(" "),r("div",{staticClass:"value"},[e._v("\n            "+e._s(e.bed.current_reservation.amount_to_pay*-1)+"\n          ")])])]),e._v(" "),r("h6",{staticClass:"justify-center date_separator"},[e._v("Payments logs")]),e._v(" "),e._l(e.bed.current_reservation.reservation_payment,function(t){return r("div",{staticClass:"border reserve_item"},[r("div",{staticClass:"item-content"},[r("div",{staticClass:"row"},[r("div",{staticClass:"column width-1of3"},[t.is_discount?r("div",{staticClass:"row"},[e._v("Discount")]):e._e(),e._v(" "),t.is_extra||t.to_pay||t.is_discount?e._e():r("div",{staticClass:"row"},[e._v("Payment")]),e._v(" "),t.to_pay?r("div",{staticClass:"row"},[e._v("To Pay")]):e._e(),e._v(" "),r("div",{staticClass:"row"},[e._v(e._s(t.description))])]),e._v(" "),r("div",{staticClass:"column width-1of3"},[r("div",{staticClass:"reserve_date"},[e._v(e._s(e.dateformatter(t.date)))])]),e._v(" "),r("div",{staticClass:"column width-1of3 btn_wrap"},[r("div",{staticClass:"log_btn"},[e._v("₹"+e._s(t.amount<0?t.amount*-1:t.amount))])])])])])}),e._v(" "),e.bed.current_reservation.reservation_payment.length?e._e():r("div",{staticClass:"text-center"},[e._v("\n        No Payments made so far.\n      ")]),e._v(" "),r("q-modal",{ref:"paymentOptionsModal",attrs:{position:"bottom","content-css":{padding:"20px"}}},[r("p",[e._v("Make Payment")]),e._v(" "),r("div",{staticClass:"row justify-around "},[r("button",{staticClass:"primary m3",on:{click:function(t){e.$refs.addPaymentModal.openModal("payment")}}},[e._v("Pay")]),e._v(" "),r("button",{staticClass:"primary m3",on:{click:function(t){e.$refs.addPaymentModal.openModal("discount")}}},[e._v("Add Discount")]),e._v(" "),r("button",{staticClass:"primary m3",on:{click:function(t){e.$refs.addPaymentModal.openModal("to_pay")}}},[e._v("To Pay")])]),e._v(" "),r("div",{staticClass:"row"},[r("button",{staticClass:"tertiary width-1of1 m10",on:{click:function(t){e.$refs.paymentOptionsModal.close()}}},[e._v("Cancel")])])]),e._v(" "),r("q-modal",{ref:"vacateModal",attrs:{position:"bottom","content-css":{padding:"20px"}}},[r("p",[e._v("Are you sure you want to vacate ?")]),e._v(" "),r("div",{staticClass:"row"},[r("button",{staticClass:"negative width-1of2 m10",on:{click:function(t){e.openVacateNow(e.bed.current_reservation)}}},[e._v("Vacate Now")]),e._v(" "),r("button",{staticClass:"negative width-1of2 m10",on:{click:function(t){e.$refs.vacateLaterModal.open()}}},[e._v("Vacate Later")])]),e._v(" "),r("div",{staticClass:"row"},[r("button",{staticClass:"tertiary width-1of1 m10",on:{click:function(t){e.$refs.vacateModal.close()}}},[e._v("Cancel")])])]),e._v(" "),r("q-modal",{ref:"openVacateModal",attrs:{position:"bottom","content-css":{padding:"20px"}}},[r("p",[e._v("Are you sure you want to vacate now ?")]),e._v(" "),r("p",{staticClass:"text-primary"},[e._v("THIS ACTION IS IRREVERSIBLE")]),e._v(" "),r("div",{staticClass:"row"},[r("button",{staticClass:"negative width-1of2 m10",on:{click:function(t){e.vacateReservationNow(e.bed.current_reservation)}}},[e._v("Vacate Now")]),e._v(" "),r("button",{staticClass:"tertiary width-1of1 m10",on:{click:function(t){e.$refs.openVacateModal.close()}}},[e._v("Cancel")])])]),e._v(" "),r("q-modal",{ref:"vacateLaterModal",staticClass:"minimized",attrs:{"content-css":{padding:"10px"}}},[r("div",{staticClass:"floating-label"},["DA"==e.bed.current_reservation.plan?r("q-datetime",{staticClass:"full-width",attrs:{label:"Date",type:"datetime"},model:{value:e.vacate_later_form.date,callback:function(t){e.vacate_later_form.date=t},expression:"vacate_later_form.date"}}):r("q-datetime",{staticClass:"full-width",attrs:{label:"Date",type:"date"},model:{value:e.vacate_later_form.date,callback:function(t){e.vacate_later_form.date=t},expression:"vacate_later_form.date"}})],1),e._v(" "),e.$v.vacate_later_form.date.required?e._e():r("span",{staticClass:"form-error-message row"},[e._v("Field is required")]),r("br"),e._v(" "),r("div",{staticClass:"row"},[r("button",{staticClass:"negative width-1of2 m3",on:{click:function(t){e.submitVacateLater(e.bed.current_reservation)}}},[e._v("Save")]),e._v(" "),r("button",{staticClass:"tertiary width-1of2 m3",on:{click:function(t){e.$refs.vacateLaterModal.close()}}},[e._v("Cancel")])])])],2):r("div",{},[r("br"),e._v(" "),r("br"),e._v(" "),r("h6",{staticClass:"text-center"},[e._v("Upcoming Reservations")]),e._v(" "),e._l(e.upcoming_reservations,function(t){return r("div",[r("ExpandableReservation",{attrs:{reservation:t,show_status_buttons:!0},on:{"update:reservation":function(e){t=e},deleteReservation:e.deleteReservation}})],1)}),e._v(" "),e.upcoming_reservations.length?e._e():r("div",{staticClass:"text-center text-faded"},[r("br"),r("br"),e._v("\n        No Upcoming Reservations found\n      ")])],2)]):e._e(),e._v(" "),r("q-modal",{ref:"addReservationModal",attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}}},[r("q-layout",[r("div",{staticClass:"toolbar",slot:"header"},[r("button",{on:{click:function(t){e.$refs.addReservationModal.close()}}},[r("i",[e._v("arrow_back")])]),e._v(" "),r("q-toolbar-title",{attrs:{padding:1}},[e._v("\n            Add Reservation\n          ")])],1),e._v(" "),r("div",{staticClass:"layout-view layout-padding"},[r("div",{staticClass:"floating-label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.new_reservation.name,expression:"new_reservation.name"}],staticClass:"full-width",attrs:{required:""},domProps:{value:e.new_reservation.name},on:{input:[function(t){t.target.composing||(e.new_reservation.name=t.target.value)},function(t){e.$v.new_reservation.name.$touch()}]}}),e._v(" "),r("label",[e._v("Name")])]),e._v(" "),e.$v.new_reservation.name.required?e._e():r("span",{staticClass:"form-error-message row"},[e._v("Name is required")]),e._v(" "),r("div",{staticClass:"floating-label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.new_reservation.phone,expression:"new_reservation.phone"}],staticClass:"full-width",attrs:{type:"number",required:""},domProps:{value:e.new_reservation.phone},on:{input:[function(t){t.target.composing||(e.new_reservation.phone=t.target.value)},function(t){e.$v.new_reservation.phone.$touch()}],blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("label",[e._v("Phone")])]),e._v(" "),e.$v.new_reservation.phone.required&&e.$v.new_reservation.phone.minLength&&e.$v.new_reservation.phone.maxLength?e._e():r("span",{staticClass:"form-error-message row"},[e._v("Enter valid 10-digit Mobile Number")]),e._v(" "),r("div",{staticClass:"floating-label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.new_reservation.email,expression:"new_reservation.email"}],staticClass:"full-width",attrs:{required:""},domProps:{value:e.new_reservation.email},on:{input:function(t){t.target.composing||(e.new_reservation.email=t.target.value)}}}),e._v(" "),r("label",[e._v("Email")])]),e._v(" "),e.$v.new_reservation.email.email?e._e():r("span",{staticClass:"form-error-message row"},[e._v("Please enter valid email.")]),e._v(" "),r("div",{staticClass:"row"},[r("span",{staticClass:"width-1of3"},[e._v("Plan")]),e._v(" "),r("label",{staticClass:"width-1of3"},[r("q-radio",{attrs:{val:"DA"},model:{value:e.new_reservation.plan,callback:function(t){e.new_reservation.plan=t},expression:"new_reservation.plan"}}),e._v("\n              Daily\n            ")],1),e._v(" "),r("label",{staticClass:"width-1of3"},[r("q-radio",{attrs:{val:"MO"},model:{value:e.new_reservation.plan,callback:function(t){e.new_reservation.plan=t},expression:"new_reservation.plan"}}),e._v("\n              Monthly\n            ")],1)]),e._v(" "),e.$v.new_reservation.plan.required?e._e():r("span",{staticClass:"form-error-message row"},[e._v("Plan is required")]),e._v(" "),r("div",{staticClass:"floating-label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.new_reservation.amount_per_plan,expression:"new_reservation.amount_per_plan"}],staticClass:"full-width",attrs:{type:"number",required:""},domProps:{value:e.new_reservation.amount_per_plan},on:{input:function(t){t.target.composing||(e.new_reservation.amount_per_plan=t.target.value)},blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("label",[e._v("Amount per "+e._s("MO"==e.new_reservation.plan?"Month":"Day"))])]),e._v(" "),e.$v.new_reservation.amount_per_plan.required&&e.$v.new_reservation.amount_per_plan.numeric?e._e():r("span",{staticClass:"form-error-message row"},[e._v("Please enter valid amount.")]),e._v(" "),r("div",{staticClass:"floating-label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.new_reservation.deposit_amount,expression:"new_reservation.deposit_amount"}],staticClass:"full-width",attrs:{type:"number",required:""},domProps:{value:e.new_reservation.deposit_amount},on:{input:function(t){t.target.composing||(e.new_reservation.deposit_amount=t.target.value)},blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("label",[e._v("Deposit Amount")])]),e._v(" "),e.$v.new_reservation.deposit_amount.required&&e.$v.new_reservation.deposit_amount.numeric?e._e():r("span",{staticClass:"form-error-message row"},[e._v("Please enter valid amount.")]),e._v(" "),r("div",{staticClass:"row"},["DA"==e.new_reservation.plan?r("CustomDateTimeRange",{staticClass:"full-width",attrs:{fromLabel:"From Date",toLabel:"To Date",type:"datetime"},on:{input:function(t){e.$v.new_reservation.range.from.$touch()}},model:{value:e.new_reservation.range,callback:function(t){e.new_reservation.range=t},expression:"new_reservation.range"}}):r("CustomDateTimeRange",{staticClass:"full-width",attrs:{fromLabel:"From Date",toLabel:"To Date",type:"date"},on:{input:function(t){e.$v.new_reservation.range.from.$touch()}},model:{value:e.new_reservation.range,callback:function(t){e.new_reservation.range=t},expression:"new_reservation.range"}})],1),e._v(" "),e.$v.new_reservation.range.from.required?e._e():r("span",{staticClass:"form-error-message row"},[e._v("From date is required")]),e._v(" "),r("div",{staticClass:"row"},[r("button",{staticClass:"primary width-1of2 m10",on:{click:function(t){e.submitReservationForm(e.bed.pk)}}},[e._v("Add Reservation")]),e._v(" "),r("button",{staticClass:"tertiary width-1of2 m10",on:{click:function(t){e.$refs.addReservationModal.close()}}},[e._v("Cancel")])])])])],1),e._v(" "),r("AddPaymentModal",{ref:"addPaymentModal",attrs:{reservation:e.bed.current_reservation},on:{success:function(t){e.$refs.paymentOptionsModal.close()},refresh:e.fetchData}}),e._v(" "),r("div",{staticClass:"row",slot:"footer"},[e.bed.current_reservation&&e.bed.current_reservation.pk?r("div",{staticClass:"column width-1of2 bg-primary",on:{click:function(t){e.$refs.paymentOptionsModal.open()}}},[r("button",{staticClass:"primary m3"},[e._v("Payment")])]):e._e(),e._v(" "),e.bed.current_reservation&&e.bed.current_reservation.pk?r("div",{staticClass:"column width-1of2 bg-tertiary",on:{click:function(t){e.$refs.vacateModal.open()}}},[r("button",{staticClass:"tertiary m3"},[e._v("Vacate")])]):e._e()])],1)},staticRenderFns:[]}}});